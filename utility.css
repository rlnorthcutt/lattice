:root {
  /* Container and rhythm */
  --container-width: 1024px;
  --m: 1.5rem;         /* base spacing */
  --g: 1rem;           /* gutter (x) */
  --gap-y: 1rem;       /* gutter (y) */
  --column-count: 5;   /* mobile content columns */
  --c: 1fr;

  /* Prevent negative fluid on narrow viewports */
  --fluid-area: max(0px, calc(50vw - var(--container-width) / 2));
}

/* Master Grid: use named, repeatable lines so we can target nth occurrences */
.grid-container {
  display: grid;
  grid-template-columns:
    [fa] var(--fluid-area)
    [m] max(var(--m), env(safe-area-inset-left))
    /* Repeat pattern: [c] content, [g] gutter â€” numbered via 'c 1', 'c 2', etc. */
    [c] var(--c) repeat(var(--column-count), [g] var(--g) [c] var(--c))
    [m] max(var(--m), env(safe-area-inset-right))
    [fa] var(--fluid-area);
}

/* Master placement (use nth named lines) */
.l-place-full   { grid-column: fa 1 / fa 2; }
.l-place-content{ grid-column: m 1 / m 2; }

/* Internal grids */
.grid {
  display: grid;
  /* Be explicit with gaps to avoid row/column confusion */
  row-gap: var(--gap-y);
  column-gap: var(--g);
  grid-template-columns: 1fr; /* default stack */
}

/* Inherit columns from parent */
.subgrid {
  display: grid;
  grid-template-columns: subgrid;
}

/* Fluid card grid when no explicit column count is set */
.grid:not([class*="col-"]) {
  grid-template-columns: repeat(auto-fit, minmax(15rem, 1fr));
}

/* Breakpointed column utilities (names reflect actual columns) */
@media (min-width: 576px) {
  .sm:col-2 { grid-template-columns: repeat(2, 1fr); }
  .sm:col-3 { grid-template-columns: repeat(3, 1fr); }
  .sm:col-4 { grid-template-columns: repeat(4, 1fr); }
  .sm:col-6 { grid-template-columns: repeat(6, 1fr); }
}
@media (min-width: 768px) {
  .md:col-2 { grid-template-columns: repeat(2, 1fr); }
  .md:col-3 { grid-template-columns: repeat(3, 1fr); }
  .md:col-4 { grid-template-columns: repeat(4, 1fr); }
  .md:col-6 { grid-template-columns: repeat(6, 1fr); }
}

/* Display / visibility */
.hidden, .d-none { display: none !important; }
.sr-only {
  position: absolute !important; width:1px !important; height:1px !important;
  padding:0 !important; margin:-1px !important; overflow:hidden !important;
  clip: rect(0, 0, 0, 0) !important; white-space:nowrap !important; border:0 !important;
}
.not-sr-only { position: static !important; width:auto !important; height:auto !important; margin:0 !important; overflow:visible !important; clip:auto !important; white-space:normal !important; }

@media (min-width: 576px) {
  .d-sm-none  { display: none !important; }
  .d-sm-block { display: block !important; }
  .d-sm-grid  { display: grid !important; }
  .d-sm-flex  { display: flex !important; }
}
@media (min-width: 768px) {
  .d-md-none  { display: none !important; }
  .d-md-block { display: block !important; }
  .d-md-grid  { display: grid !important; }
  .d-md-flex  { display: flex !important; }
}
@media (max-width: 575.98px) {
  .hidden-sm-only { display: none !important; }
}

/* Width helpers (keep distinct from placement) */
.w-100   { width: 100% !important; box-sizing: border-box; }
.max-w-100 { max-width: 100% !important; box-sizing: border-box; }

/* Minimal spacing scale (optional but handy) */
.p-0 { padding: 0 !important; }
.p-1 { padding: calc(var(--m) / 4) !important; }
.p-2 { padding: calc(var(--m) / 2) !important; }
.p-3 { padding: var(--m) !important; }
.mx-auto { margin-left: auto !important; margin-right: auto !important; }

/* Gaps and alignment */
.gap-none { row-gap: 0; column-gap: 0; }
.gap-y-lg { row-gap: var(--m); }

.items-start   { align-items: start; }
.items-center  { align-items: center; }
.items-end     { align-items: end; }
.items-stretch { align-items: stretch; }

.justify-start   { justify-items: start; }
.justify-center  { justify-items: center; }
.justify-end     { justify-items: end; }
.justify-stretch { justify-items: stretch; }

/* Spans (relative to content columns) */
.col-span-1  { grid-column: c 1 / c 2; }
.col-span-2  { grid-column: c 1 / c 3; }
.col-span-3  { grid-column: c 1 / c 4; }
.col-span-4  { grid-column: c 1 / c 5; }
.col-span-5  { grid-column: c 1 / c 6; } /* mobile max */

/* Desktop expansion */
@media (min-width: 768px) {
  :root { --column-count: 11; }
  .col-span-6  { grid-column: c 1 / c 7; }
  .col-span-7  { grid-column: c 1 / c 8; }
  .col-span-8  { grid-column: c 1 / c 9; }
  .col-span-9  { grid-column: c 1 / c 10; }
  .col-span-10 { grid-column: c 1 / c 11; }
  .col-span-11 { grid-column: c 1 / c 12; } /* desktop max */
}

/* Row placement */
.row-span-1  { grid-row: span 1; }
.row-span-2  { grid-row: span 2; }
.row-span-3  { grid-row: span 3; }
.row-start-1 { grid-row-start: 1; }
.row-start-2 { grid-row-start: 2; }
.row-start-3 { grid-row-start: 3; }
