/*!
 * Ivy.css — classless, elegant HTML defaults (CORE)
 * Version: 1.0.0
 * URL: https://github.com/rlnorthcutt/ivy
 * License: MIT (https://opensource.org/licenses/MIT)
 */

/** Scope (CORE)
 * - Readable defaults for HTML elements (typography, code, tables, forms, media).
 * - Minimal color tokens with light/dark support.
 * - Tiny a11y improvements (focus-visible, skip link, sr-only) + print + forced-colors.
 * - No components; no layout system (use Lattice.css for placement).
 * Philosophy
 * - Keep core tiny; move polish to ivy.extra.css.
 * - Prefer variables; only keep calculated vars that “pay rent” (used ≥ 2–3×).
 */

/* ==========================================================================
   0) Root tokens — palette, type scale, rhythm
   - Define both light AND dark palettes here.
   - “Applied” tokens (e.g., --color-bg) default to light and are remapped by theme.
   ========================================================================== */
:root{
  /* palette (light) */
  --color-bg-light:#ffffff; --color-text-light:#1b1f23; --color-muted-light:#667085;
  --color-link-light:#00786c; --color-primary-light:#00786c; --color-primary-text-light:#ffffff;
  --color-secondary-light:#d64c1d; --color-secondary-text-light:#ffffff;
  --color-border-light:#e5e7eb; --color-surface-light:#fafafa;
  --surface-2-light:#f5f7fa; --surface-3-light:#eef2f7;
  /* palette (dark) */
  --color-bg-dark:#0b0d10; --color-text-dark:#e6e7e9; --color-muted-dark:#98a2b3;
  --color-link-dark:#00786c; --color-primary-dark:#00786c; --color-primary-text-dark:#0b0d10;
  --color-secondary-dark:#d64c1d; --color-secondary-text-dark:#0b0d10;
  --color-border-dark:#23262b; --color-surface-dark:#111418;
  --surface-2-dark:#0f1216;  --surface-3-dark:#12161b;
  /* applied palette (defaults to light; theme switch remaps these) */
  --color-bg:var(--color-bg-light); --color-text:var(--color-text-light); --color-muted:var(--color-muted-light);
  --color-link:var(--color-link-light); --color-primary:var(--color-primary-light); --color-primary-text:var(--color-primary-text-light);
  --color-secondary:var(--color-secondary-light); --color-secondary-text:var(--color-secondary-text-light);
  --color-border:var(--color-border-light); --color-surface:var(--color-surface-light);

  /* type & rhythm (global scales) */
  --font-sans:"Inter", ui-sans-serif, system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica Neue,Arial,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  --font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  --base-size:16px; --font-size:100%; --lh:1.6; --measure:64rem;
  --radius:.375rem; --m:1rem;

  /* semantic states (reused across core & extra) */
  --info:#60a5fa; --ok:#22c55e; --warn:#f59e0b; --danger:#ef4444;
}

/* ===========================================================================
   Do not change below (core defaults). Use overrides or Extra for customization.
   =========================================================================== */

/* ==========================================================================
   Calculated Vars — minimal (derived from --m)
   - Only keep high-use values to keep core slim.
   ========================================================================== */
:root{
  /* spacing scale */
  --m-0_5:calc(var(--m)*0.5); --m-0_75:calc(var(--m)*0.75); --m-0_875:calc(var(--m)*0.875); --m-2:calc(var(--m)*2);
  /* type helper (small) */
  --fs-sm:var(--m-0_875);
  /* radii */
  --radius-sm:.25rem; --radius-xs:.125rem;
  /* borders, focus, underline */
  --bw-1:1px; --bw-2:2px; --focus-ring:var(--bw-2);
  --u-offset:2px; --u-thick:2px;
}

/* ==========================================================================
   Theme switching (minimal, html-scoped)
   ========================================================================== */
html{color-scheme:light;}
@media (prefers-color-scheme:dark){
  html:not([data-theme]){
    --color-bg:var(--color-bg-dark); --color-text:var(--color-text-dark); --color-muted:var(--color-muted-dark);
    --color-link:var(--color-link-dark); --color-primary:var(--color-primary-dark); --color-primary-text:var(--color-primary-text-dark);
    --color-secondary:var(--color-secondary-dark); --color-secondary-text:var(--color-secondary-text-dark);
    --color-border:var(--color-border-dark); --color-surface:var(--color-surface-dark);
    --surface-2:var(--surface-2-dark, var(--color-surface)); --surface-3:var(--surface-3-dark, var(--color-surface));
    --shadow-sm:var(--shadow-sm-dark, var(--shadow-sm)); --shadow-md:var(--shadow-md-dark, var(--shadow-md));
    color-scheme:dark;
  }
}
html[data-theme="dark"], html.dark{
  --color-bg:var(--color-bg-dark); --color-text:var(--color-text-dark); --color-muted:var(--color-muted-dark);
  --color-link:var(--color-link-dark); --color-primary:var(--color-primary-dark); --color-primary-text:var(--color-primary-text-dark);
  --color-secondary:var(--color-secondary-dark); --color-secondary-text:var(--color-secondary-text-dark);
  --color-border:var(--color-border-dark); --color-surface:var(--color-surface-dark);
  --surface-2:var(--surface-2-dark, var(--color-surface)); --surface-3:var(--surface-3-dark, var(--color-surface));
  --shadow-sm:var(--shadow-sm-dark, var(--shadow-sm)); --shadow-md:var(--shadow-md-dark, var(--shadow-md));
  color-scheme:dark;
}
html[data-theme="light"], html.light{
  --color-bg:var(--color-bg-light); --color-text:var(--color-text-light); --color-muted:var(--color-muted-light);
  --color-link:var(--color-link-light); --color-primary:var(--color-primary-light); --color-primary-text:var(--color-primary-text-light);
  --color-secondary:var(--color-secondary-light); --color-secondary-text:var(--color-secondary-text-light);
  --color-border:var(--color-border-light); --color-surface:var(--color-surface-light);
  --surface-2:var(--surface-2-light, var(--color-surface)); --surface-3:var(--surface-3-light, var(--color-surface));
  --shadow-sm:var(--shadow-sm-light, var(--shadow-sm)); --shadow-md:var(--shadow-md-light, var(--shadow-md));
  color-scheme:light;
}


/* responsive root type (based on 16px) */
@media (min-width:576px){:root,:host{--font-size:110%;}}
@media (min-width:768px){:root,:host{--font-size:115%;}}
@media (min-width:1024px){:root,:host{--font-size:120%;}}
@media (min-width:1280px){:root,:host{--font-size:130%;}}
@media (min-width:1536px){:root,:host{--font-size:137.5%;}}
@media (min-width:1920px){:root,:host{--font-size:143.75%;}}
@media (min-width:2560px){:root,:host{--font-size:150%;}}

/* ==========================================================================
   1) Document & base
   - Default readable width; layout handled by Lattice.css if needed.
   ========================================================================== */
*{box-sizing:border-box;}
html{font-size:100%;}
body{margin:0; font-family:var(--font-sans); font-size:var(--base-size); line-height:var(--lh); color:var(--color-text); background:var(--color-bg); text-rendering:optimizeLegibility; -webkit-font-smoothing:antialiased;}
main,article,section,header,footer,aside,nav{display:block;}
main,article{max-width:var(--measure); margin:0 auto; padding:0 var(--m);}
header,footer{padding:var(--m-2) 0;}
section{padding:var(--m) 0;}

/* ==========================================================================
   2) Typography flow
   - Fluid headings; comfy paragraph rhythm; minimal helpers.
   ========================================================================== */
h1,h2,h3,h4,h5,h6{margin:0 0 .75em; line-height:1.2; font-weight:700;}
h1 {font-size:clamp(1.875rem,calc(1rem + 2vw),2.5rem);}
h2 {font-size:clamp(1.5rem,calc(1rem + 1.5vw),2rem);}
h3 {font-size:clamp(1.25rem,calc(1rem + 1vw),1.5rem);}
h4{font-size:1.125rem;} h5{font-size:1rem;} h6{font-size:var(--fs-sm); color:var(--color-muted);}
p,ul,ol,dl,pre,table,blockquote,figure,section,article{margin:0 0 var(--m);}
small{font-size:.875em; color:var(--color-muted);}
strong,b{font-weight:600;} em,i{font-style:italic;}
ul,ol{padding-left:1.25em;}
hr{border:0; height:var(--bw-1); background:var(--color-border); margin:var(--m-2) 0;}
blockquote{margin:0 0 var(--m); padding-left:var(--m); border-left:3px solid var(--color-border); color:var(--color-muted); font-style:italic;}
figure{margin:0 0 var(--m);}
figcaption{margin-top:.5rem; color:var(--color-muted); font-size:var(--fs-sm); text-align:center;}
.muted{color:var(--color-muted)!important;}

/* ==========================================================================
   3) Links and nav
   - Keep link underline offset in core; hover thickness moved to Extra.
   ========================================================================== */
a{color:var(--color-link); text-decoration:underline; text-underline-offset:var(--u-offset);}
a:focus-visible{outline:var(--focus-ring) solid var(--color-link); outline-offset:2px; border-radius:var(--radius-xs);}
nav{margin:0 0 var(--m);}
nav>ul,nav>ol{display:flex; flex-wrap:wrap; align-items:center; gap:var(--m-0_5); list-style:none; margin:0; padding:0;}
nav li{display:flex; align-items:center;}
nav a{display:inline-block; padding:.25rem .2rem; text-decoration:none;}
nav a:hover{text-decoration:underline;}
nav [aria-current=page]{font-weight:700;}
header nav a{font-size: var(--m);}

/* ==========================================================================
   4) Code, pre, kbd
   - Minimal, readable code; no syntax themes in core.
   ========================================================================== */
code,kbd,pre,samp{font-family:var(--font-mono); font-size:.95em;}
code{background:var(--color-surface); border:var(--bw-1) solid var(--color-border); padding:.1em .35em; border-radius:var(--radius-sm);}
pre{padding:var(--m); overflow:auto; background:var(--color-surface); border:var(--bw-1) solid var(--color-border); border-radius:var(--radius);}
pre>code{background:transparent; border:0; padding:0; font-size:1em;}
kbd{background:var(--color-surface); border:var(--bw-1) solid var(--color-border); border-radius:var(--radius-sm); padding:.15em .4em;}
p>code{padding:.08em .3em;}

/* ==========================================================================
   5) Media — images, video, svg
   ========================================================================== */
img,svg,video,canvas{max-width:100%; height:auto;}
img{display:block;} svg{display:inline-block; vertical-align:middle;}
iframe{max-width:100%; border:0;}

/* ==========================================================================
   6) Tables — minimal, readable
   - Keep structure in core; striping/stacking/compact in Extra.
   ========================================================================== */
table{width:100%; border-collapse:collapse;}
th,td{padding:var(--m-0_75); border-bottom:var(--bw-1) solid var(--color-border); text-align:left;}
thead th{border-bottom:var(--bw-2) solid var(--color-border);}

/* ==========================================================================
   7) Forms — normalize & minimal controls
   - No component theming; just sane defaults. Extras in ivy.extra.css.
   ========================================================================== */
input,textarea,select,button{font:inherit; color:inherit; line-height:inherit;}
input,textarea,select{width:100%; padding:.5em .65em; border:1px solid var(--color-border); border-radius:var(--radius); background:var(--color-bg);}
textarea{min-height:8rem; resize:vertical;}
select{
  appearance:none; /* tiny caret using currentColor for theme parity */
  background-image:
    linear-gradient(45deg,transparent 50%,currentColor 50%),
    linear-gradient(135deg,currentColor 50%,transparent 50%),
    linear-gradient(to right,transparent,transparent);
  background-position:calc(100% - 1.1em) .9em,calc(100% - .7em) .9em,0 0;
  background-size:.4em .4em,.4em .4em,100% 100%; background-repeat:no-repeat;
}
input::placeholder,textarea::placeholder{color:var(--color-muted);}
fieldset{border:var(--bw-1) solid var(--color-border); border-radius:var(--radius); padding:var(--m);}
button,[type=button],[type=submit],[type=reset]{display:inline-block; width:auto; padding:.5em .8em; border:var(--bw-1) solid color-mix(in oklab,var(--color-primary) 55%,var(--color-border)); border-radius:var(--radius); background:var(--color-primary); color:var(--color-primary-text); cursor:pointer; transition:background-color .15s ease,border-color .15s ease,color .15s ease;}
button:hover,[type=button]:hover,[type=submit]:hover,[type=reset]:hover{background:color-mix(in oklab,var(--color-primary) 85%,var(--color-bg));}
button:active,[type=button]:active,[type=submit]:active,[type=reset]:active{background:color-mix(in oklab,var(--color-primary) 75%,var(--color-bg));}
button:disabled,[type=button]:disabled,[type=submit]:disabled,[type=reset]:disabled{opacity:.6; cursor:not-allowed;}
:focus-visible{outline:var(--focus-ring) solid var(--color-primary); outline-offset:2px;}
/* forms: native + ARIA error states + tiny helpers */
:is(input,select,textarea)[aria-invalid=true],:is(input,select,textarea):invalid{border-color:color-mix(in oklab,var(--danger) 60%,var(--color-border));}
.form-help{font-size:var(--fs-sm); color:var(--color-muted);}
.form-error{font-size:var(--fs-sm); color:color-mix(in oklab,var(--danger) 80%,var(--color-text));}

/* ==========================================================================
   8) Selection, accessibility
   - Selection tint, visually-hidden helpers, skip link, HC mode, print.
   ========================================================================== */
::selection{background:color-mix(in oklab,var(--color-link) 25%,transparent); color:inherit;}
/* sr-only — visually hidden but available to screen readers (focusable) */
.sr-only{position:absolute!important; width:1px!important; height:1px!important; padding:0!important; margin:-1px!important;overflow:hidden!important; clip:rect(1px,1px,1px,1px)!important; white-space:nowrap!important; border:0!important;}
/* sr-only-focusable — becomes visible when focused/activated */
.sr-only-focusable:focus,.sr-only-focusable:active{
  /* unhide */
  position:static!important; width:auto!important; height:auto!important; margin:0!important; overflow:visible!important; clip:auto!important; white-space:inherit!important;
  /* visual */
  padding:.4em .6em; background:var(--color-surface); border:var(--bw-1) solid var(--color-border); border-radius:var(--radius); z-index:9999;
}
/* Windows High Contrast / forced-colors safety */
@media (forced-colors:active){
  *{outline-color:CanvasText!important;}
  a{text-decoration:underline;}
  :focus-visible{outline:var(--focus-ring) solid CanvasText;}
  :is(input,select,textarea,button){border-color:CanvasText; background:Canvas; color:CanvasText;}
}
/* print: clean pages by default */
@media print{
  :root{--color-bg:#fff; --color-text:#000;}
  body{background:#fff; color:#000;}
  nav,[role=banner],[role=navigation],.btn-group{display:none!important;}
  a{text-decoration:underline;}
  pre,code{white-space:pre-wrap;}
}
/*!
 * Ivy Extra — optional polish for Ivy.css (CLASSLESS)
 * Version: 1.1.0-extra
 * URL: https://github.com/rlnorthcutt/ivy
 * License: MIT
 */

/** Requires: ivy.css (CORE)
 * Scope (EXTRA)
 * - Component-level polish: buttons/variants, details/summary, tooltips, dialog,
 *   progress, breadcrumbs, badges, spinner, cards/boxes with shadows, callouts.
 * - Advanced form touches: accent-color, switches, range, file button, kbd nicety.
 * - Tables: striping, stacked (responsive), compact/dense, caption styling.
 * - Utilities + small helpers (nav align, typographic helpers).
 * Theme
 * - Mirrors core theme switching; defines surface/shadow tokens for both schemes.
 */

/* ==========================================================================
   0) Tokens — surfaces + shadows (light/dark) + applied + primary
   - Dark shadows include a soft halo for visibility on dark backgrounds.
   ========================================================================== */
:root{
  /* light surfaces + shadows */
  --surface-2-light:#f5f7fa; --surface-3-light:#eef2f7;
  --shadow-sm-light:0 1px 2px rgba(0,0,0,.06),0 1px 1px rgba(0,0,0,.04);
  --shadow-md-light:0 4px 10px rgba(0,0,0,.08),0 2px 4px rgba(0,0,0,.06);
  /* dark surfaces + shadows (with light glow stroke) */
  --surface-2-dark:#0f1216; --surface-3-dark:#12161b;
  --shadow-sm-dark:0 1px 2px rgba(0,0,0,.5),0 0 0 1px rgba(255,255,255,.10),0 0 8px rgba(255,255,255,.08);
  --shadow-md-dark:0 8px 24px rgba(0,0,0,.45),0 4px 12px rgba(0,0,0,.35),0 0 0 1px rgba(255,255,255,.10),0 0 22px rgba(255,255,255,.10);

  /* applied (default to light; remapped via theme switching below) */
  --surface-2:var(--surface-2-light); --surface-3:var(--surface-3-light);
  --shadow-sm:var(--shadow-sm-light); --shadow-md:var(--shadow-md-light);

  /* tie into core accent palette */
  --primary:var(--color-primary);
  --on-primary:var(--color-primary-text);
  --secondary:var(--color-secondary);
  --on-secondary:var(--color-secondary-text);
  --spinner-size:1.1rem; --spinner-thickness:3px;
}

/* theme switching (mirrors core; remaps applied tokens) */
html{color-scheme:light;}
@media (prefers-color-scheme:dark){
  :root:not([data-theme]):not(.dark){
    --surface-2:var(--surface-2-dark); --surface-3:var(--surface-3-dark);
    --shadow-sm:var(--shadow-sm-dark); --shadow-md:var(--shadow-md-dark);
  }
  html:not([data-theme]):not(.dark){color-scheme:dark;}
}
:where([data-theme="dark"],.dark){
  --surface-2:var(--surface-2-dark); --surface-3:var(--surface-3-dark);
  --shadow-sm:var(--shadow-sm-dark); --shadow-md:var(--shadow-md-dark); color-scheme:dark;
}
:where([data-theme="light"]){
  --surface-2:var(--surface-2-light); --surface-3:var(--surface-3-light);
  --shadow-sm:var(--shadow-sm-light); --shadow-md:var(--shadow-md-light); color-scheme:light;
}

/* ==========================================================================
   1) Buttons — minimal base + opt-in variants/sizes
   - Base inherits core button reset; adds surfaces/shadows/variants here.
   ========================================================================== */
button,[type=button],[type=submit],[type=reset],a[role=button]{
  display:inline-block; border:var(--bw-1) solid var(--color-border); border-radius:var(--radius);
  background:var(--surface-2); color:inherit; padding:.55em .9em; line-height:1.25; text-decoration:none;
  box-shadow:var(--shadow-sm); transition:transform .06s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease;
}
button:hover,[type=button]:hover,[type=submit]:hover,[type=reset]:hover,a[role=button]:hover{background:var(--surface-3);}
button:active,[type=button]:active,[type=submit]:active,[type=reset]:active,a[role=button]:active{transform:translateY(1px);}
@media (prefers-reduced-motion:reduce){button:active,[type=button]:active,[type=submit]:active,[type=reset]:active,a[role=button]:active{transform:none;}}
button:focus-visible,[type=button]:focus-visible,[type=submit]:focus-visible,[type=reset]:focus-visible,a[role=button]:focus-visible{outline:var(--focus-ring) solid var(--primary); outline-offset:2px;}
button:disabled,[type=button]:disabled,[type=submit]:disabled,[type=reset]:disabled{opacity:.6; cursor:not-allowed;}
/* variants (opt-in) */
[data-variant=primary]{background:var(--primary)!important; color:var(--on-primary)!important; border-color:color-mix(in oklab,var(--primary) 70%,#000 0%);}
[data-variant=primary]:hover{filter:saturate(1.05) brightness(1.02);}
[data-variant=primary]:active{filter:saturate(1.1) brightness(.98);}
[data-variant=secondary]{background:var(--secondary)!important; color:var(--on-secondary)!important; border-color:color-mix(in oklab,var(--secondary) 70%,#000 0%);}
[data-variant=secondary]:hover{filter:saturate(1.05) brightness(1.02);}
[data-variant=secondary]:active{filter:saturate(1.1) brightness(.98);}
[data-variant=outline]{background:transparent!important; color:var(--primary)!important; border-color:var(--primary);}
[data-variant=ghost]{background:transparent!important; border-color:transparent; color:var(--primary);}
[data-variant=outline-secondary]{background:transparent!important; color:var(--secondary)!important; border-color:var(--secondary);}
[data-variant=ghost-secondary]{background:transparent!important; border-color:transparent; color:var(--secondary);}
[data-size=sm]{padding:.4em .7em; font-size:.925em;}
[data-size=lg]{padding:.7em 1.1em; font-size:1.05em;}

/* ==========================================================================
   2) Details / summary — disclosure polish
   ========================================================================== */
details{border:var(--bw-1) solid var(--color-border); border-radius:var(--radius); padding:var(--m-0_5) var(--m-0_75); background:var(--surface-2);}
details+details{margin-top:var(--m-0_75);}
summary{cursor:pointer; font-weight:600; list-style:none;}
summary::-webkit-details-marker{display:none;}
details[open]{background:var(--surface-3);}
details[open]>summary{margin-bottom:var(--m-0_5);}

/* ==========================================================================
   3) Tooltips — opt-in via [data-tooltip]
   ========================================================================== */
[data-tooltip]{position:relative;}
[data-tooltip]::after{
  content:attr(data-tooltip); position:absolute; white-space:nowrap;
  inset:auto auto calc(100% + var(--m-0_5)) 50%; transform:translateX(-50%); pointer-events:none;
  background:color-mix(in oklab,var(--color-text) 93%,transparent); color:var(--color-bg);
  padding:.35em .5em; border-radius:.35rem; font-size:.85em; opacity:0; translate:0 .25rem;
  transition:opacity .15s ease,translate .15s ease; box-shadow:var(--shadow-sm); z-index:50;
}
[data-tooltip]:hover::after,[data-tooltip]:focus-within::after{opacity:1; translate:0 0;}
[data-placement=right]::after{inset:50% auto auto calc(100% + var(--m-0_5)); transform:translateY(-50%);}
[data-placement=bottom]::after{inset:calc(100% + var(--m-0_5)) auto auto 50%; transform:translateX(-50%);}
[data-placement=left]::after{inset:50% calc(100% + var(--m-0_5)) auto auto; transform:translateY(-50%);}

/* ==========================================================================
   4) Dialog — minimal modal styling
   ========================================================================== */
dialog{border:var(--bw-1) solid var(--color-border); border-radius:.75rem; padding:0; margin:auto; background:var(--color-bg); color:inherit; box-shadow:var(--shadow-md); max-width:48rem;}
dialog>article{padding:var(--m) var(--m-0_75);}
dialog::backdrop{background:color-mix(in oklab,#000 55%,transparent); backdrop-filter:saturate(.95) blur(1px);}

/* ==========================================================================
   5) Progress — theme-aware
   ========================================================================== */
progress{width:100%; height:var(--m); appearance:none; border:0; background:var(--surface-2); border-radius:999px; overflow:hidden;}
progress::-webkit-progress-bar{background:var(--surface-2);}
progress::-webkit-progress-value{background:var(--primary);}
progress::-moz-progress-bar{background:var(--primary);}
progress[data-variant=secondary]::-webkit-progress-value{background:var(--secondary);}
progress[data-variant=secondary]::-moz-progress-bar{background:var(--secondary);}

/* ==========================================================================
   6) Tables — striping, caption, stacked, compact/dense
   - Core keeps minimal structure; Extra adds comfort and responsive fallback.
   ========================================================================== */
table[data-striped] tbody tr:nth-child(odd){background:color-mix(in oklab,var(--surface-2) 70%,transparent);}
tfoot td,tfoot th{color:var(--color-muted); font-weight:500;}
/* comfort padding compared to core */
table th,table td{padding:calc(var(--m)*0.625) var(--m-0_75);}
caption{caption-side:bottom; padding:.5rem 0; color:var(--color-muted); font-size:.9em;}
/* opt-in stacked layout on narrow screens (use data-label on <td>) */
@media (max-width:640px){
  table[data-stack]{display:block;}
  table[data-stack] :is(thead,tfoot){display:none;}
  table[data-stack] tbody,table[data-stack] tr,table[data-stack] td{display:block; width:100%;}
  table[data-stack] td{padding:var(--m-0_5) var(--m); border-bottom:var(--bw-1) solid var(--color-border);}
  table[data-stack] td::before{content:attr(data-label) ": "; font-weight:600; color:var(--color-muted);}
}
/* compact/dense toggles */
table[data-compact] th,table[data-compact] td{padding:.45rem .6rem;}
table[data-dense] th,table[data-dense] td{padding:.35rem .5rem; font-size:.95em;}

/* ==========================================================================
   7) Forms — accent-color, switches, range, file button + small cosmetics
   ========================================================================== */
:where(input[type=checkbox],input[type=radio],progress){accent-color:var(--primary);}
:where(input[type=checkbox],input[type=radio])[data-variant=secondary]{accent-color:var(--secondary);}
/* switch control (<input type="checkbox" role="switch">) */
input[type=checkbox][role=switch]{appearance:none; width:2.5rem; height:1.35rem; border-radius:999px; background:var(--surface-3); position:relative; border:var(--bw-1) solid var(--color-border); vertical-align:middle; outline:none; transition:background .15s;}
input[role=switch]::after{content:""; position:absolute; left:.15rem; top:50%; width:1rem; height:1rem; transform:translateY(-50%); background:#fff; border-radius:999px; box-shadow:var(--shadow-sm); transition:left .15s;}
input[role=switch]:checked{background:color-mix(in oklab,var(--primary) 40%,var(--surface-3));}
input[role=switch]:checked::after{left:calc(100% - 1.15rem);}
input[role=switch]:focus-visible{outline:var(--focus-ring) solid var(--primary); outline-offset:2px;}
/* kbd embellishment (moved from core) */
kbd{border-bottom-width:var(--bw-2);}
/* range (volume) — filled track to the left of the thumb */
input[type=range]{
  appearance:none; width:100%; height:.25rem; border-radius:999px;
  /* base + filled-left segment via gradient (WebKit/Blink) */
  --range-fill:color-mix(in oklab,var(--primary) 40%,transparent);
  background:linear-gradient(var(--range-fill),var(--range-fill)) 0/var(--range-progress,0%) 100% no-repeat,var(--surface-3);
}
input[type=range]::-webkit-slider-thumb{appearance:none; width:1rem; height:1rem; border-radius:50%; background:var(--primary); border:var(--bw-2) solid var(--color-bg); box-shadow:var(--shadow-sm);}
input[type=range]::-moz-range-thumb{width:1rem; height:1rem; border-radius:50%; background:var(--primary); border:var(--bw-2) solid var(--color-bg); box-shadow:var(--shadow-sm);}
input[type=range]::-moz-range-track{height:.25rem; border-radius:999px; background:var(--surface-3);}
input[type=range]::-moz-range-progress{height:.25rem; border-radius:999px; background:var(--range-fill);}
input[type=range]:focus-visible{outline:var(--focus-ring) solid var(--primary); outline-offset:6px;}
/* nicer file pick button — match default button look */
input[type=file]::-webkit-file-upload-button,
input[type=file]::file-selector-button{
  color:inherit; background:var(--surface-2); border:var(--bw-1) solid var(--color-border); border-radius:var(--radius);
  padding:.55em .9em; line-height:1.25; box-shadow:var(--shadow-sm); cursor:pointer;
  transition:background-color .15s ease,border-color .15s ease,box-shadow .15s ease;
}
input[type=file]::-webkit-file-upload-button:hover,
input[type=file]::file-selector-button:hover{background:var(--surface-3);}
/* legend + hover underline nicety (moved from core) */
legend{padding:0 .35rem; color:var(--color-muted);}
a:hover{text-decoration-thickness:var(--u-thick);}

/* ==========================================================================
   8) Breadcrumbs — semantic structure
   ========================================================================== */
nav[aria-label=breadcrumb] ol{display:flex; flex-wrap:wrap; gap:0; padding:0; margin:0; list-style:none;}
nav[aria-label=breadcrumb] li{display:flex; align-items:center; color:var(--color-muted);}
nav[aria-label=breadcrumb] li+li::before{content:">"; margin:0 .35rem; color:var(--color-muted);}
nav[aria-label=breadcrumb] a{text-decoration:none;}
nav[aria-label=breadcrumb] a:hover{text-decoration:underline;}
nav[aria-label=breadcrumb] [aria-current=page]{color:inherit; font-weight:600;}

/* ==========================================================================
   9) Badges — tiny label chips
   ========================================================================== */
[aria-label][data-badge]{position:relative;}
[aria-label][data-badge]::after{content:attr(data-badge); position:absolute; top:-.4em; right:-.4em; font-size:.7em; line-height:1; background:var(--primary); color:var(--on-primary); border-radius:999px; padding:.25em .45em; box-shadow:var(--shadow-sm);}
[aria-label][data-badge][data-tone=secondary]::after{background:var(--secondary); color:var(--on-secondary);}

/* ==========================================================================
   10) Busy/spinner — attribute-driven
   ========================================================================== */
@keyframes ivy-spin{to{transform:rotate(1turn);}}
[aria-busy=true]{position:relative;}
[aria-busy=true]::after{content:""; position:absolute; inset:auto .35rem .35rem auto;width:var(--spinner-size); height:var(--spinner-size);border:var(--spinner-thickness) solid color-mix(in oklab,var(--primary) 20%,transparent);border-top-color:var(--primary); border-radius:50%;animation:ivy-spin .8s linear infinite;}
@media (prefers-reduced-motion:reduce){[aria-busy=true]::after{animation:none;}}

/* ==========================================================================
   11) Containers — card / box (with shadows)
   ========================================================================== */
.card,.box{color:inherit; border:var(--bw-1) solid var(--color-border); border-radius:var(--radius); padding:var(--m);margin:0 0 var(--m); background: var(--color-surface)}
.card{box-shadow:var(--shadow-sm);}
.card:hover{box-shadow:var(--shadow-md); transition:box-shadow .15s ease; border-color: var(--color-primary)}
.card>footer,.card>header{margin:calc(var(--m)*-1); margin-bottom:var(--m); padding:var(--m);}
.card>header :is(h1,h2,h3,h4,h5,h6){margin:0;}
.card>header{border-bottom:var(--bw-1) solid var(--color-border); border-radius:calc(var(--radius) - 1px) calc(var(--radius) - 1px) 0 0;}
.card>footer{border-top:var(--bw-1) solid var(--color-border); border-radius:0 0 calc(var(--radius) - 1px) calc(var(--radius) - 1px);}
.card[data-variant=soft],.box[data-variant=soft]{background:var(--surface-2);}
.card[data-variant=primary],.box[data-variant=primary]{border-color:color-mix(in oklab,var(--primary) 45%,var(--color-border)); box-shadow:0 0 0 1px color-mix(in oklab,var(--primary) 20%,transparent),var(--shadow-sm);}
.card[data-variant=secondary],.box[data-variant=secondary]{border-color:color-mix(in oklab,var(--secondary) 45%,var(--color-border)); box-shadow:0 0 0 1px color-mix(in oklab,var(--secondary) 20%,transparent),var(--shadow-sm);}
[data-padding=sm]{padding:.65rem;}
[data-padding=lg]{padding:1.25rem;}

/* ==========================================================================
   12) Callouts — attribute or class
   ========================================================================== */
.callout{border:var(--bw-1) solid var(--color-border); border-radius:var(--radius); padding:var(--m-0_75) var(--m); background:var(--surface-2);margin:0 0 var(--m);}
.callout>strong{display:block; margin-bottom:.25rem;}
.callout[data-tone=info],.callout.info{border-color:color-mix(in oklab,var(--info) 45%,var(--color-border));background:color-mix(in oklab,var(--info) 12%,var(--surface-2));}
.callout[data-tone=success],.callout.success{border-color:color-mix(in oklab,var(--ok) 45%,var(--color-border));background:color-mix(in oklab,var(--ok) 12%,var(--surface-2));}
.callout[data-tone=warn],.callout.warn{border-color:color-mix(in oklab,var(--warn) 45%,var(--color-border));background:color-mix(in oklab,var(--warn) 12%,var(--surface-2));}
.callout[data-tone=danger],.callout.danger{border-color:color-mix(in oklab,var(--danger) 45%,var(--color-border));background:color-mix(in oklab,var(--danger) 12%,var(--surface-2));}

/* ==========================================================================
   13) Groups + helpers — button groups, nav align, typographic helpers
   ========================================================================== */
.btn-group{display:flex; flex-wrap:wrap; gap:var(--m-0_5);}
.btn-group[data-align=center]{justify-content:center;}
.btn-group[data-align=end]{justify-content:flex-end;}
/* nav alignment helpers (moved from core) */
nav[data-align=center]>ul,nav[data-align=center]>ol{justify-content:center;}
nav[data-align=end]>ul,nav[data-align=end]>ol{justify-content:flex-end;}
/* typographic helpers (moved from core) */
.center{text-align:center;}
.eyebrow{font-size:var(--fs-sm); color:var(--color-muted);}
.kicker{font-size:var(--fs-sm); text-transform:uppercase; letter-spacing:.08em; color:var(--color-muted);}

/* ==========================================================================
   14) Utilities — small, non-overlapping helpers
   ========================================================================== */
.divider{height:1px; background:var(--color-border); margin:var(--m) 0;}
.surface-2{background:var(--surface-2);}
.surface-3{background:var(--surface-3);}
.muted a{color:color-mix(in oklab,var(--color-link) 70%,var(--color-muted));}
.text-primary{color:var(--primary)!important;}
.bg-primary{background:var(--primary)!important; color:var(--on-primary)!important;}
.text-secondary{color:var(--secondary)!important;}
.bg-secondary{background:var(--secondary)!important; color:var(--on-secondary)!important;}
